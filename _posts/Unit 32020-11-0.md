# Unit 3

## Knowledge

* class和继承
* 类型判断instanceof
* 原型和原型链

## Problem

* 如何准确判断一个变量是不是数组
* 手写一个简易的JQuery，考虑插件和扩展性
* class的原型本质，怎么理解

### 原型

`class实际上是函数，可见是语法糖`

#### 原型关系

* 每一个class都有显示原型prototype
* 每个实例都有隐式原型__ proto __
* 实例的__ proto __ 指向对应class的prototype

#### 基于原型的执行规则

获取属性或执行方法时，先在自身属性和方法寻找，如果找不到则自动去__ proto __ 中查找。

#### 原型链

![截屏2020-11-26 上午8.48.56](/Users/Muze/Library/Application Support/typora-user-images/截屏2020-11-26 上午8.48.56.png)

#### Tips

* class是ES6语法规范，由ECMA委员会发布
* ECMA只规定语法规则，即我们代码的书写规范，不规定如何实现
* 以上实现方式都由V8引擎的实现方式，也是主流

## Answer

### 如何准确判断一个变量是不是数组

<var> instanceof Array

### clss的原型本质，怎么理解

原型链图示，和原型的执行规则

### 手写一个简易的JQuery，考虑插件和扩展性

```javascript
class JQuery {
  constructor(selector) {
    const result = document.querySelectorAll(selector);
    const length = result.length;
    for (let i = 0; i < length; ++i) this[i] = result[i];
    this.length = length;
    this.selector = selector;
  }
  
  get(index) {
    return this[index];
  }
  
  each(fn) {
    for (let i = 0; i < this.length; ++i) {
      const element = this[i];
      fn(element);
    }
  }
  
  on(type, fn) {
		this.each(element => {
      element.addEventListener(type, fn, false);
    });
  }
  
}

// Plugin
JQuery.prototype.dialog = function (msg) {
  alert(msg);
}

// 造轮子
class MineJQuery extends JQuery {
  constructor(selector) {
    super(selector);
  }
  addClass() {
    
  }
  addStyle() {
    
  }
}
```

