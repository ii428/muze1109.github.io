# Unit 4

## knowledge

* 作用域和自由变量
* 闭包
* this

## Probelm

* this的不用应用场景，如何取值？
* 手写bind函数
* 实际开发中闭包的应用场景，举例说明

### 作用域

* 全局作用域
* 函数作用域
* 块级作用域(ES6新增)

### 自由变量

使用一个在当前作用域没有定义的变量

`attention: 向上级作用域，一层一层一次寻找，直到找到为止；如果到全局作用域都没有找到，则会报错“xx is not defined”`

 ### 闭包

作用域应用的特殊情况，有两种情况：

* 函数作为参数被传递
* 函数作为返回值被返回

`attention: 所有的自由变量的查找，是在函数定义的地方，向上级作用域查找，不是在执行的地方！！`

```javascript
function create() {
    const a = 100;
    return function() {
        console.log(a);
    }
}

const fn = create();
const a = 200;
fn();		// 100
```

```javascript
const a = 100;
function fn() {
    console.log(a);
}

function print(fn) {
    const a = 200;
    fn();
}

print(fn);		// 100
```

### this

this的取值在函数执行的时候确认的，不是在函数定义的时候！！！

* 作为普通函数 // window
* 使用call、apply、bind // 传入的this指向
* 作为对象方法被调用 // 对象实例本身
* 在class方法中调用 // 对象实例本身
* 箭头函数 // 上级作用域的this

### 手写bind函数

```javascript

```

